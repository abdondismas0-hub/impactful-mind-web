{% extends "base.html" %}

{% block content %}
<div style="padding-top: 50px;">
    
    <!-- 1. HEADER & STATS -->
    <div class="glass-panel" style="text-align: center; margin-bottom: 30px;">
        <h1 style="color: var(--accent);"><i class="fas fa-tachometer-alt"></i> Admin Dashboard</h1>
    </div>
    
    <div style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-bottom: 40px;">
        <div class="glass-panel" style="flex: 1 1 200px; text-align: center; border-bottom: 4px solid #3498db;">
            <h2 style="font-size: 3rem; margin: 0; color: #fff;">{{ total_books }}</h2>
            <p>Vitabu</p>
        </div>
        <div class="glass-panel" style="flex: 1 1 200px; text-align: center; border-bottom: 4px solid #f1c40f;">
            <h2 style="font-size: 3rem; margin: 0; color: #fff;">{{ total_posts }}</h2>
            <p>Posts</p>
        </div>
        <div class="glass-panel" style="flex: 1 1 200px; text-align: center; border-bottom: 4px solid #9b59b6;">
            <h2 style="font-size: 3rem; margin: 0; color: #fff;">{{ total_videos }}</h2>
            <p>Videos</p>
        </div>
    </div>

    <!-- 2. ACTIONS (VITUFE VYA KUONGEZA) -->
    <div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-bottom: 50px;">
        <a href="{{ url_for('add_book') }}" class="btn" style="background: #3498db;">+ Ongeza Kitabu</a>
        <a href="{{ url_for('add_post') }}" class="btn" style="background: #f1c40f; color: #000;">+ Andika Post</a>
        <a href="{{ url_for('add_video') }}" class="btn" style="background: #9b59b6;">+ Pakia Video</a>
        <a href="{{ url_for('edit_about') }}" class="btn" style="background: #e67e22;">Hariri Founder</a>
    </div>

    <!-- 3. MANAGE CONTENT (SEHEMU YA KUFUTA) -->
    
    <!-- Manage Posts -->
    <div class="glass-panel">
        <h3 style="color: var(--accent); border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">Simamia Posts</h3>
        {% if posts %}
            <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                {% for post in posts %}
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                    <td style="padding: 10px; color: white;">{{ post.title }}</td>
                    <td style="padding: 10px; color: #aaa; font-size: 0.8rem;">{{ post.date_posted.strftime('%d/%m/%Y') }}</td>
                    <td style="padding: 10px; text-align: right;">
                        <form action="{{ url_for('delete_post', post_id=post.id) }}" method="POST" onsubmit="return confirm('Una uhakika unataka kufuta post hii?');">
                            <button type="submit" class="btn" style="padding: 5px 15px; background: #e74c3c; font-size: 0.8rem;">Futa</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </table>
        {% else %}
            <p style="color: #888;">Hakuna posts.</p>
        {% endif %}
    </div>

    <!-- Manage Books -->
    <div class="glass-panel">
        <h3 style="color: var(--accent); border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">Simamia Vitabu</h3>
        {% if books %}
            <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                {% for book in books %}
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                    <td style="padding: 10px; color: white;">{{ book.title }}</td>
                    <td style="padding: 10px; text-align: right;">
                        <form action="{{ url_for('delete_book', book_id=book.id) }}" method="POST" onsubmit="return confirm('Futa kitabu hiki?');">
                            <button type="submit" class="btn" style="padding: 5px 15px; background: #e74c3c; font-size: 0.8rem;">Futa</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </table>
        {% else %}
            <p style="color: #888;">Hakuna vitabu.</p>
        {% endif %}
    </div>

    <!-- Manage Videos -->
    <div class="glass-panel">
        <h3 style="color: var(--accent); border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">Simamia Video</h3>
        {% if videos %}
            <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                {% for video in videos %}
                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                    <td style="padding: 10px; color: white;">{{ video.title }}</td>
                    <td style="padding: 10px; text-align: right;">
                        <form action="{{ url_for('delete_video', video_id=video.id) }}" method="POST" onsubmit="return confirm('Futa video hii?');">
                            <button type="submit" class="btn" style="padding: 5px 15px; background: #e74c3c; font-size: 0.8rem;">Futa</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </table>
        {% else %}
            <p style="color: #888;">Hakuna video.</p>
        {% endif %}
    </div>

    <!-- Logout -->
    <div style="text-align: center; margin-top: 40px; margin-bottom: 50px;">
        <a href="{{ url_for('admin_logout') }}" style="color: #e74c3c; text-decoration: none; font-weight: bold;">
            <i class="fas fa-sign-out-alt"></i> Ondoka (Logout)
        </a>
    </div>

</div>
{% endblock %}


