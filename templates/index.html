{% extends "base.html" %}

{% block content %}

<!-- SEHEMU YA 1: SLIDESHOW (CAROUSEL) -->
<div class="carousel-container" style="margin-bottom: 40px; position: relative; height: 400px; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
    {% if carousel_posts %}
        <div id="hero-carousel">
            {% for post in carousel_posts %}
            <div class="slide" style="display: {{ 'block' if loop.first else 'none' }}; height: 100%; width: 100%; background-image: url('{{ url_for('download_book', filename=post.image_file) }}'); background-size: cover; background-position: center;">
                <div style="position: absolute; bottom: 0; width: 100%; background: linear-gradient(transparent, rgba(0,0,0,0.9)); padding: 30px; color: white;">
                    <h2 style="color: #f1c40f; font-size: 2rem; text-shadow: 2px 2px 4px black;">{{ post.title }}</h2>
                    <a href="{{ url_for('view_post', post_id=post.id) }}" class="btn" style="margin-top: 10px;">Soma Zaidi</a>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <!-- Kama hamna posts, onyesha hii default -->
        <div style="height: 100%; width: 100%; background: linear-gradient(135deg, #0c1422, #1e3c72); display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; color: white;">
            <h1 style="font-size: 3rem; color: #f1c40f;">Karibu Impactful Mind</h1>
            <p style="font-size: 1.2rem; margin-top: 10px;">Jenga Akili, Badilisha Maisha.</p>
        </div>
    {% endif %}
</div>

<!-- SEHEMU YA 2: FOUNDER (MWANZILISHI) -->
<div class="glass-panel" style="display: flex; flex-wrap: wrap; gap: 30px; align-items: center; padding: 40px;">
    <div style="flex: 1 1 200px; text-align: center;">
        <!-- Picha ya Founder -->
        <div style="width: 200px; height: 200px; border-radius: 50%; overflow: hidden; border: 5px solid #f1c40f; margin: 0 auto;">
            {% if about_info and about_info.founder_image %}
                <img src="{{ url_for('download_book', filename=about_info.founder_image) }}" style="width: 100%; height: 100%; object-fit: cover;">
            {% else %}
                <img src="https://via.placeholder.com/200?text=Founder" style="width: 100%; height: 100%; object-fit: cover;">
            {% endif %}
        </div>
    </div>
    <div style="flex: 2 1 300px;">
        <h2 style="color: #f1c40f; border-bottom: 2px solid #f1c40f; display: inline-block;">Kutana na Mwanzilishi</h2>
        <h3 style="color: white; margin-top: 10px;">{{ about_info.founder_name if about_info else 'Jina la Mwanzilishi' }}</h3>
        <p style="color: #ccc; line-height: 1.6; font-size: 1.1rem;">
            {{ about_info.founder_bio if about_info else 'Maelezo kuhusu mwanzilishi yataonekana hapa baada ya kuwekwa kwenye Admin Dashboard.' }}
        </p>
    </div>
</div>

<!-- SEHEMU YA 3: MAUDHUI MAPYA -->
<div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 40px;">
    
    <!-- Machapisho ya Hivi Karibuni -->
    <div class="glass-panel" style="flex: 1;">
        <h3 style="color: #f1c40f;"><i class="fas fa-newspaper"></i> Daily Posts Mpya</h3>
        <ul style="list-style: none; padding: 0;">
            {% for post in posts %}
                <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <a href="{{ url_for('view_post', post_id=post.id) }}" style="color: white; font-weight: bold; text-decoration: none;">{{ post.title }}</a>
                </li>
            {% else %}
                <li style="color: #888;">Hakuna posts bado.</li>
            {% endfor %}
        </ul>
        <a href="{{ url_for('posts') }}" style="color: #3498db; display: block; margin-top: 10px;">Ona Zote &rarr;</a>
    </div>

    <!-- Vitabu Vipya -->
    <div class="glass-panel" style="flex: 1;">
        <h3 style="color: #f1c40f;"><i class="fas fa-book"></i> Vitabu Vipya</h3>
        <ul style="list-style: none; padding: 0;">
            {% for book in books %}
                <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <span style="color: white;">{{ book.title }}</span>
                    <a href="{{ url_for('download_book', filename=book.file_path) }}" style="float: right; color: #2ecc71;"><i class="fas fa-download"></i> PDF</a>
                </li>
            {% else %}
                <li style="color: #888;">Hakuna vitabu bado.</li>
            {% endfor %}
        </ul>
        <a href="{{ url_for('library') }}" style="color: #3498db; display: block; margin-top: 10px;">Ingia Maktaba &rarr;</a>
    </div>

</div>

<!-- JavaScript Ndogo ya Slideshow -->
<script>
    let slideIndex = 0;
    const slides = document.querySelectorAll('.slide');
    function showSlides() {
        if(slides.length === 0) return;
        for (let i = 0; i < slides.length; i++) slides[i].style.display = "none";  
        slideIndex++;
        if (slideIndex > slides.length) {slideIndex = 1}    
        slides[slideIndex-1].style.display = "block";  
        setTimeout(showSlides, 4000);
    }
    showSlides();
</script>

{% endblock %}


